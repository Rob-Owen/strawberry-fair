# Strawberry Fair Website

## Overview

This is source code for the Cambridge Strawberry Fair website. 

This frontend is a static site generated by [Gatsby](https://www.gatsbyjs.org/). Content is managed via [NetlifyCMS](https://www.netlifycms.org/).

## Local Development Setup

Prerequisites:
* Node v12.13 or higher
* npm 6.13.0 or higher
* gatsby cli (`npm install -g gatsby-cli`)

Checkout the source code and run the following from this directory:
1. `npm ci`
2. `npm start`

Gatsby will build and run the site in develop mode. When complete, the site will be available at `localhost:8000`.

## CMS

You access the CMS by visiting `localhost:8000/admin`. If the CMS settings in the branch you are working on are set to use git-gateway,
you will need to log in using Netlify Identity. The details for this login are pinned in the Slack channel.

If you are running locally and you want to look at the CMS _and not change anything_, you will be prompted to enter the site's URL.
This is https://strawberry-fair.netlify.com/. If you only want to look at the CMS, this will be fine, but if you edit anything
it will push directly to the production branch.

If you are running locally and you need to access the CMS for editing purposes, go into `static/admin/config.yml` and change

```
backend:
  name: git-gateway
  accept_roles:
    - admin
    - content
```

to

```
backend:
  name: github
  repo: Softwire/strawberry-fair
  branch: [ YOUR BRANCH HERE ]
```

ensuring you include the name of the branch you're working on.

**_Make sure you change it back before merging anything back into master._**

This will push any changes you make to `origin/[your branch]`, so you may want to run `git pull` after making any edits here to ensure your local copy stays up to date.

